<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Halden Weather</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #b6eaff 0%, #e0c3fc 100%);
      font-family: 'Roboto', Arial, sans-serif;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .weather-card {
      margin-top: 3em;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 18px;
      box-shadow: 0 6px 24px #87a1c01c;
      max-width: 340px;
      padding: 2.5em 2em 2em 2em;
      text-align: center;
      position: relative;
      transition: box-shadow 0.3s;
    }
    .weather-card:hover {
      box-shadow: 0 12px 40px #87a1c041;
    }
    .city {
      font-family: 'Montserrat', Arial, sans-serif;
      font-size: 2em;
      font-weight: 600;
      color: #2d587c;
      margin-bottom: 0.2em;
      letter-spacing: 1px;
    }
    .temp {
      font-size: 3.7em;
      font-weight: 500;
      color: #3587a4;
      margin: 0.2em 0 0.2em 0;
      line-height: 1;
    }
    .desc {
      font-size: 1.2em;
      color: #546e7a;
      margin-bottom: 1.4em;
      text-transform: capitalize;
      letter-spacing: 0.5px;
    }
    .row {
      display: flex;
      justify-content: space-between;
      margin: 1em 0 0.5em 0;
      font-size: 1em;
      color: #5d6d7e;
    }
    .icon {
      width: 76px;
      height: 76px;
      margin: 0.5em auto 0 auto;
      display: block;
    }
    .footer {
      margin-top: 2em;
      font-size: 0.96em;
      color: #6d7d8b;
      letter-spacing: 0.2px;
      text-align: center;
    }
    a {
      color: #2480b3;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    @media (max-width: 400px) {
      .weather-card { padding: 1.4em 0.7em; }
      .temp { font-size: 2.1em; }
      .city { font-size: 1.25em; }
    }
  </style>
</head>
<body>
  <div class="weather-card">
    <div class="city">Halden, Norway</div>
    <img class="icon" id="weather-icon" alt="Weather icon" src="" style="display:none;">
    <div class="temp" id="temp">-- °C</div>
    <div class="desc" id="desc">Loading...</div>
    <div class="row">
      <div>Wind: <span id="wind">--</span> m/s</div>
      <div>Humidity: <span id="humidity">--</span>%</div>
    </div>
  </div>
  <div class="footer">
    Data from <a href="https://api.met.no/weatherapi/locationforecast/2.0/documentation" target="_blank">Meteorologisk institutt</a>
  </div>
  <script>
    async function fetchWeather() {
      const url = 'https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=59.1312&lon=11.3875';
      try {
        const response = await fetch(url, {
          headers: {
            'User-Agent': 'github.com/einaram-test/fluffy-octo-doodle weather demo',
            'Accept': 'application/json'
          }
        });
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();
        const timeseries = data.properties.timeseries;
        const now = timeseries[0];

        // Main values
        const temp = now.data.instant.details.air_temperature;
        const wind = now.data.instant.details.wind_speed;
        const humidity = now.data.instant.details.relative_humidity || '--';

        // Weather symbol
        let summary = "Unknown";
        let symbol = "";
        if (now.data.next_1_hours) {
          summary = now.data.next_1_hours.summary.symbol_code.replace(/_/g, " ");
          symbol = now.data.next_1_hours.summary.symbol_code;
        } else if (now.data.next_6_hours) {
          summary = now.data.next_6_hours.summary.symbol_code.replace(/_/g, " ");
          symbol = now.data.next_6_hours.summary.symbol_code;
        }

        // Set icon from met.no symbol (SVG)
        if(symbol) {
          const iconUrl = `https://api.met.no/images/weathericons/svg/${symbol}.svg`;
          const img = document.getElementById('weather-icon');
          img.src = iconUrl;
          img.style.display = "block";
          img.alt = summary;
        }

        document.getElementById('temp').textContent = `${Math.round(temp)} °C`;
        document.getElementById('desc').textContent = summary;
        document.getElementById('wind').textContent = wind;
        document.getElementById('humidity').textContent = humidity;
      } catch (e) {
        document.getElementById('desc').textContent = 'Failed to load weather data.';
      }
    }
    fetchWeather();
  </script>
</body>
</html>
